/* =========================================================
   DESIGN TOKENS — Premium Dark Theme
========================================================= */
:root {
  --bg:        #08090d;
  --bg-2:      #0d0f14;
  --bg-3:      #12151c;
  --surface:   #16191f;
  --surface-2: #1c2028;
  --surface-3: #242830;
  --border:    rgba(255,255,255,0.06);
  --border-2:  rgba(255,255,255,0.10);
  --border-3:  rgba(255,255,255,0.16);

  --blue:      #6b9bff;
  --blue-s:    rgba(107,155,255,0.10);
  --blue-g:    rgba(107,155,255,0.22);
  --teal:      #3ee8c0;
  --teal-s:    rgba(62,232,192,0.08);
  --pink:      #f472b6;
  --pink-s:    rgba(244,114,182,0.08);
  --amber:     #fbbf24;
  --amber-s:   rgba(251,191,36,0.08);
  --red:       #fb7185;

  --t1:  #f0f2f8;
  --t2:  #8e99b0;
  --t3:  #505a6e;
  --t4:  #313845;

  --sans: 'Plus Jakarta Sans', system-ui, -apple-system, sans-serif;
  --mono: 'JetBrains Mono', ui-monospace, monospace;

  --nav-w: 272px;
  --r-sm:  8px;
  --r:     12px;
  --r-lg:  16px;
  --r-xl:  24px;
}

/* =========================================================
   RESET
========================================================= */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
body{
  font-family:var(--sans);
  font-size:15px;
  line-height:1.65;
  color:var(--t1);
  background:var(--bg);
  min-height:100vh;
  overflow-x:hidden;
}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
button{font-family:inherit}

::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--surface-3);border-radius:99px}
::-webkit-scrollbar-thumb:hover{background:var(--t4)}

/* =========================================================
   AMBIENT BACKGROUND
========================================================= */
.ambient{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.ambient-orb{position:absolute;border-radius:50%;filter:blur(120px);opacity:.6}
.orb-1{width:800px;height:800px;top:-300px;right:-200px;
  background:radial-gradient(circle,rgba(107,155,255,.06) 0%,transparent 65%)}
.orb-2{width:700px;height:700px;bottom:-200px;left:-250px;
  background:radial-gradient(circle,rgba(62,232,192,.04) 0%,transparent 65%)}
.orb-3{width:500px;height:500px;top:40%;left:40%;transform:translate(-50%,-50%);
  background:radial-gradient(circle,rgba(244,114,182,.025) 0%,transparent 65%)}

/* =========================================================
   LAYOUT
========================================================= */
.shell{display:flex;min-height:100vh;position:relative;z-index:1}
.main{flex:1;min-width:0;position:relative;z-index:1}
.content{
  max-width:1080px;
  margin:0 auto;
  padding:56px 32px 100px;
}

/* =========================================================
   SECTION LABELS & HEADINGS
========================================================= */
.sec-label{
  display:flex;align-items:center;gap:14px;
  font-family:var(--mono);font-size:10px;font-weight:600;
  letter-spacing:.18em;text-transform:uppercase;
  color:var(--t3);margin-bottom:20px;
}
.sec-label::after{content:'';flex:1;height:1px;background:var(--border)}

/* =========================================================
   NAV BUTTONS & CTA
========================================================= */
.nav-btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 18px;
  border-radius:var(--r);
  border:1px solid var(--border-2);
  background:var(--surface);
  font-family:var(--mono);font-size:11px;font-weight:500;
  color:var(--t2);
  cursor:pointer;
  transition:all .2s ease;
  white-space:nowrap;
}
.nav-btn:hover{
  color:var(--t1);
  border-color:var(--border-3);
  background:var(--surface-2);
  transform:translateY(-1px);
}
.nav-btn.primary{
  background:var(--blue-s);
  border-color:var(--blue-g);
  color:var(--blue);
}
.nav-btn.primary:hover{
  background:rgba(107,155,255,.18);
  border-color:rgba(107,155,255,.35);
}

.cta-btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 20px;
  border-radius:var(--r);border:1px solid var(--border-2);
  background:var(--surface);
  font-family:var(--mono);font-size:11px;font-weight:500;
  color:var(--t2);cursor:pointer;
  transition:all .2s ease;
}
.cta-btn:hover{color:var(--t1);border-color:var(--border-3);background:var(--surface-2)}

/* =========================================================
   PLATFORM INDEX — Hero
========================================================= */
.platform-shell{max-width:1180px}
.platform-hero{
  display:flex;justify-content:space-between;gap:32px;align-items:flex-end;
  margin-bottom:32px;
  padding:36px 36px 32px;
  border:1px solid var(--border);
  border-radius:var(--r-xl);
  background:linear-gradient(145deg,rgba(107,155,255,.07),rgba(62,232,192,.03));
  position:relative;
  overflow:hidden;
}
.platform-hero::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(107,155,255,.3),transparent);
}
.hero-kicker{
  font-family:var(--mono);font-size:11px;
  letter-spacing:.1em;text-transform:uppercase;
  color:var(--teal);margin-bottom:12px;
}
.platform-hero h1{
  font-size:clamp(28px,3.5vw,44px);line-height:1.15;
  letter-spacing:-.03em;margin-bottom:12px;font-weight:700;
}
.platform-hero h1 em{font-style:normal;color:var(--blue)}
.platform-hero .hero-lead{font-size:15px;color:var(--t2);line-height:1.6;max-width:520px}
.hero-actions{display:flex;gap:10px;flex-wrap:wrap;flex-shrink:0}

/* =========================================================
   KPI CARDS
========================================================= */
.kpi-grid{
  display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:20px;
}
.kpi-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  padding:20px 22px;
  transition:border-color .2s,transform .2s;
}
.kpi-card:hover{border-color:var(--border-2);transform:translateY(-1px)}
.kpi-card span{
  display:block;font-family:var(--mono);font-size:10px;
  color:var(--t3);text-transform:uppercase;letter-spacing:.14em;
  margin-bottom:8px;
}
.kpi-card strong{font-size:30px;line-height:1.1;font-weight:800;letter-spacing:-.02em}

/* =========================================================
   CONTROL BAR
========================================================= */
.control-bar{
  display:grid;grid-template-columns:1.5fr .7fr .7fr auto;gap:12px;
  margin-bottom:22px;
}
.search-wrap{
  display:flex;align-items:center;gap:10px;
  padding:0 16px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r);
  transition:border-color .2s;
}
.search-wrap:focus-within{border-color:var(--blue-g)}
.search-wrap.wide{min-width:unset}
.search-icon{color:var(--t3);display:flex;align-items:center}
.search-wrap input{
  flex:1;border:none;background:none;outline:none;
  font-family:var(--sans);font-size:13px;color:var(--t1);
  padding:11px 0;
}
.search-wrap input::placeholder{color:var(--t3)}

.phase-filter{
  padding:10px 14px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r);
  font-family:var(--sans);font-size:13px;
  color:var(--t2);cursor:pointer;
  transition:border-color .2s;
  appearance:none;
  -webkit-appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23505a6e' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right 12px center;
  padding-right:32px;
}
.phase-filter:focus{border-color:var(--blue-g);outline:none}

/* =========================================================
   PHASE SUMMARY
========================================================= */
.phase-summary-grid{
  display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:32px;
}
.phase-summary{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  padding:20px 22px;
  position:relative;
  overflow:hidden;
  transition:border-color .2s,transform .2s;
}
.phase-summary:hover{border-color:var(--border-2);transform:translateY(-1px)}
.phase-summary::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
}
.phase-summary.ph-1::before{background:linear-gradient(90deg,var(--blue),transparent 80%)}
.phase-summary.ph-2::before{background:linear-gradient(90deg,var(--pink),transparent 80%)}
.phase-summary.ph-3::before{background:linear-gradient(90deg,var(--teal),transparent 80%)}
.phase-summary.ph-4::before{background:linear-gradient(90deg,var(--amber),transparent 80%)}
.phase-summary h3{
  font-family:var(--mono);font-size:10px;
  color:var(--t3);text-transform:uppercase;letter-spacing:.14em;
}
.phase-summary h4{font-size:15px;font-weight:700;margin:6px 0 8px;color:var(--t1)}
.phase-summary p{font-size:13px;color:var(--t2);line-height:1.55}

/* =========================================================
   LESSON LIBRARY CARDS
========================================================= */
.lesson-library{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px;
}
.lesson-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  padding:22px 24px;
  display:flex;flex-direction:column;gap:12px;
  transition:all .25s ease;
  position:relative;
  overflow:hidden;
}
.lesson-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(107,155,255,.15),transparent);
  opacity:0;transition:opacity .25s;
}
.lesson-card:hover{
  border-color:var(--border-2);
  transform:translateY(-2px);
  box-shadow:0 12px 40px rgba(0,0,0,.25);
}
.lesson-card:hover::before{opacity:1}
.lesson-card.done{
  border-color:rgba(62,232,192,.25);
}
.lesson-card.done::before{
  background:linear-gradient(90deg,transparent,rgba(62,232,192,.2),transparent);
  opacity:1;
}
.lesson-top{
  display:flex;justify-content:space-between;gap:8px;
  font-family:var(--mono);font-size:10px;color:var(--t3);
  letter-spacing:.06em;
}
.lesson-id{color:var(--blue);font-weight:600}
.lesson-card h3{font-size:15px;line-height:1.45;font-weight:600}
.lesson-card p{font-size:12.5px;color:var(--t2)}
.lesson-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:auto}
.empty-state{
  padding:28px;
  border:1px dashed var(--border-2);
  border-radius:var(--r-lg);
  color:var(--t2);
  text-align:center;
  grid-column:1/-1;
}

/* =========================================================
   LESSON PAGES — Layout
========================================================= */
.lesson-page .content{padding-top:24px}
.lesson-shell{max-width:900px;margin:0 auto}

.page-nav{
  display:flex;justify-content:space-between;gap:10px;
  margin:0 0 24px;
}

.lesson-head{
  margin-bottom:24px;
  padding:28px 32px;
  border:1px solid var(--border);
  border-radius:var(--r-xl);
  background:linear-gradient(145deg,rgba(107,155,255,.07),rgba(62,232,192,.03));
  position:relative;
  overflow:hidden;
}
.lesson-head::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(107,155,255,.3),transparent);
}
.lesson-head h1{font-size:clamp(24px,3vw,32px);line-height:1.2;letter-spacing:-.02em;font-weight:700}
.lesson-head p{font-family:var(--mono);font-size:11px;color:var(--t3);margin-top:8px;letter-spacing:.04em}

.lesson-ops{
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:20px;
}
.ops-hint{font-size:12px;color:var(--t3);font-style:italic}

.reading-progress{
  position:fixed;top:0;left:0;height:3px;width:0%;z-index:999;
  background:linear-gradient(90deg,var(--blue),var(--teal));
  border-radius:0 2px 2px 0;
}

/* =========================================================
   LESSON BODY — Content Elements
========================================================= */
.day-body{
  display:block;
  background:transparent;
  border:none;
  padding:0;
}

/* Goal banner */
.goal{
  display:flex;gap:16px;align-items:flex-start;
  background:var(--blue-s);
  border:1px solid var(--blue-g);
  border-radius:var(--r-lg);
  padding:22px 26px;
  margin-bottom:36px;
}
.goal-tag{
  font-family:var(--mono);font-size:9px;font-weight:700;
  letter-spacing:.15em;text-transform:uppercase;
  color:var(--blue);white-space:nowrap;padding-top:3px;
}
.goal-txt{font-size:14px;color:var(--t2);line-height:1.7}

/* Analogy */
.analogy{
  display:flex;gap:20px;
  background:var(--surface);
  border:1px solid var(--border);
  border-left:3px solid var(--amber);
  border-radius:0 var(--r-lg) var(--r-lg) 0;
  padding:24px 26px;margin-bottom:28px;
}
.analogy-ico{font-size:24px;flex-shrink:0;padding-top:2px}
.analogy-lbl{
  font-family:var(--mono);font-size:10px;font-weight:600;
  text-transform:uppercase;letter-spacing:.14em;
  color:var(--amber);margin-bottom:8px;
}
.analogy p{font-size:14px;color:var(--t2);line-height:1.75}
.analogy strong{color:var(--t1);font-weight:600}

/* Section heading */
.c-hd{
  font-family:var(--mono);font-size:10px;font-weight:600;
  text-transform:uppercase;letter-spacing:.16em;color:var(--t3);
  padding-bottom:12px;
  border-bottom:1px solid var(--border);
  margin-bottom:18px;
  margin-top:8px;
}

/* Bullet list */
.c-list{
  list-style:none;display:flex;flex-direction:column;gap:12px;margin-bottom:30px;
}
.c-list li{
  display:flex;align-items:flex-start;gap:14px;
  font-size:14px;color:var(--t2);line-height:1.7;
}
.c-list li::before{
  content:'';
  width:4px;height:4px;border-radius:50%;
  background:var(--blue);flex-shrink:0;margin-top:10px;
}
.c-list strong{color:var(--t1);font-weight:600}
.c-list code,.c-list em{
  font-family:var(--mono);font-size:12px;color:var(--teal);
  background:var(--teal-s);padding:2px 7px;border-radius:5px;font-style:normal;
}

/* Code block */
.code-wrap{
  border-radius:var(--r-lg);overflow:hidden;
  border:1px solid var(--border);margin-bottom:26px;
}
.code-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 18px;
  background:var(--surface-2);
  border-bottom:1px solid var(--border);
}
.code-lbl{font-family:var(--mono);font-size:11px;color:var(--t2)}
.copy-btn{
  font-family:var(--mono);font-size:10px;padding:5px 14px;
  border-radius:var(--r-sm);
  background:var(--surface);
  border:1px solid var(--border-2);
  color:var(--t3);cursor:pointer;
  transition:all .2s ease;letter-spacing:.04em;
}
.copy-btn:hover{background:var(--blue-s);color:var(--blue);border-color:var(--blue-g)}
.copy-btn.ok{color:var(--teal);border-color:rgba(62,232,192,.3);background:var(--teal-s)}

pre{
  background:var(--bg);
  padding:24px;
  overflow-x:auto;
  font-family:var(--mono);
  font-size:12.5px;
  line-height:1.85;
  color:var(--t2);
}
.kw{color:#7da8ff;font-weight:700}
.tb{color:#7dcfff}
.col{color:#5adec4}
.cm{color:#3a4660;font-style:italic}
.str{color:#97d580}
.num{color:#ff9b6e}
.fn{color:#c5a3ff}

/* Path chain */
.path-chain{
  display:flex;align-items:center;flex-wrap:wrap;gap:8px;
  padding:16px 20px;background:var(--bg);
  border:1px solid var(--border);border-radius:var(--r-lg);margin-bottom:12px;
}
.pn{
  font-family:var(--mono);font-size:11.5px;color:var(--teal);
  background:var(--teal-s);border:1px solid rgba(62,232,192,.18);
  padding:5px 12px;border-radius:var(--r-sm);white-space:nowrap;
}
.pa{color:var(--t4);font-family:var(--mono);font-size:12px}
.pc-label{
  margin-left:auto;font-family:var(--mono);font-size:10px;
  color:var(--t3);font-style:italic;white-space:nowrap;
}

/* Exercise */
.exercise{
  background:var(--surface);
  border:1px solid var(--border);
  border-left:3px solid var(--pink);
  border-radius:0 var(--r-lg) var(--r-lg) 0;
  padding:24px 26px;margin-bottom:26px;
}
.ex-hd{
  display:flex;align-items:center;gap:8px;
  font-family:var(--mono);font-size:10px;font-weight:700;
  text-transform:uppercase;letter-spacing:.16em;
  color:var(--pink);margin-bottom:14px;
}
.exercise p{font-size:14px;color:var(--t2);line-height:1.7;margin-bottom:10px}
.exercise .hint{
  font-family:var(--mono);font-size:11.5px;
  color:var(--t3);font-style:italic;
}

/* Rules grid */
.rules-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:30px}
.rule{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-lg);padding:24px;display:flex;gap:16px;
  transition:border-color .2s,transform .2s;
}
.rule:hover{border-color:var(--border-2);transform:translateY(-1px)}
.rule.full{grid-column:1/-1}
.rule-n{font-size:32px;font-weight:800;color:var(--surface-3);line-height:1;flex-shrink:0;padding-top:2px}
.rule strong{display:block;font-size:13.5px;font-weight:600;color:var(--t1);margin-bottom:6px}
.rule p{font-size:12.5px;color:var(--t2);line-height:1.65}
.rule code{font-family:var(--mono);font-size:11px;color:var(--teal);
  background:var(--teal-s);padding:2px 7px;border-radius:4px}

/* Milestone */
.milestone{
  display:flex;gap:20px;align-items:flex-start;
  padding:28px 32px;
  background:linear-gradient(140deg,rgba(107,155,255,.08),rgba(62,232,192,.05));
  border:1px solid rgba(107,155,255,.18);
  border-radius:var(--r-xl);margin-top:36px;
}
.milestone-ico{font-size:26px;flex-shrink:0;padding-top:2px}
.milestone strong{
  display:block;font-size:14.5px;font-weight:700;
  color:var(--teal);margin-bottom:6px;
}
.milestone p{font-size:13.5px;color:var(--t2);line-height:1.7}

/* Quick ref */
.qr-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.qr{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-lg);padding:24px;
  transition:border-color .2s,transform .2s;
}
.qr:hover{border-color:var(--border-2);transform:translateY(-1px)}
.qr-hd{
  display:flex;align-items:center;gap:8px;
  font-family:var(--mono);font-size:10px;font-weight:700;
  text-transform:uppercase;letter-spacing:.14em;
  color:var(--pink);margin-bottom:12px;
}
.qr-dot{width:5px;height:5px;border-radius:50%;background:var(--pink)}
.qr-q{font-size:13.5px;font-weight:600;color:var(--t1);margin-bottom:8px}
.qr-a{font-size:13px;color:var(--t2);line-height:1.7}
.qr-a code{font-family:var(--mono);font-size:11px;color:var(--teal);
  background:var(--teal-s);padding:2px 7px;border-radius:4px}

/* Notes panel */
.notes-panel{
  margin-top:32px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  padding:24px;
}
.notes-panel textarea{
  width:100%;min-height:140px;
  border:1px solid var(--border-2);
  background:var(--bg-2);color:var(--t1);
  border-radius:var(--r);
  padding:16px;
  font-family:var(--sans);font-size:14px;
  line-height:1.6;
  resize:vertical;
  transition:border-color .2s;
}
.notes-panel textarea:focus{border-color:var(--blue-g);outline:none}

/* Footer */
.site-footer{
  text-align:center;padding:48px 0 64px;margin-top:64px;
  border-top:1px solid var(--border);
  font-family:var(--mono);font-size:11px;color:var(--t4);letter-spacing:.06em;
}

/* =========================================================
   SEQUENCE CARDS — Lesson Content Mode
========================================================= */
.lesson-page .lesson-shell{max-width:1100px}
.lesson-page .day-body{
  display:flex;
  flex-direction:column;
  gap:20px;
}
.lesson-page .seq-card{
  border:1px solid var(--border);
  border-radius:var(--r-xl);
  background:var(--surface);
  box-shadow:0 4px 24px rgba(0,0,0,.12);
  padding:32px 36px;
  position:relative;
  overflow:hidden;
  transition:border-color .2s,transform .2s;
}
.lesson-page .seq-card:hover{
  border-color:var(--border-2);
  transform:translateY(-1px);
}
.lesson-page .seq-card::after{
  content:'';
  position:absolute;
  top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(107,155,255,.15),transparent);
}
.lesson-page .seq-card > *{position:relative;z-index:1}
.lesson-page .seq-badge{
  display:inline-flex;
  margin-bottom:20px;
  padding:6px 12px;
  border-radius:999px;
  border:1px solid var(--blue-g);
  background:var(--blue-s);
  color:var(--blue);
  font-family:var(--mono);
  font-size:10px;font-weight:600;
  letter-spacing:.12em;
  text-transform:uppercase;
}

/* =========================================================
   RESPONSIVE
========================================================= */
@media(max-width:980px){
  .kpi-grid{grid-template-columns:repeat(2,1fr)}
  .phase-summary-grid{grid-template-columns:repeat(2,1fr)}
  .control-bar{grid-template-columns:1fr 1fr}
  .rules-grid,.qr-grid{grid-template-columns:1fr}
  .rule.full{grid-column:1}
}
@media(max-width:700px){
  .content{padding:32px 18px 64px}
  .platform-hero{flex-direction:column;align-items:flex-start;padding:28px 24px 24px}
  .kpi-grid,.phase-summary-grid{grid-template-columns:1fr}
  .control-bar{grid-template-columns:1fr}
  .lesson-head{padding:22px 20px}
  .lesson-head h1{font-size:22px}
  .page-nav{flex-direction:column}
  .lesson-page .seq-card{padding:22px 20px}
}

/* =========================================================
   ANIMATIONS
========================================================= */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(16px)}
  to{opacity:1;transform:translateY(0)}
}
.platform-hero{animation:fadeUp .45s ease .05s both}
.kpi-grid{animation:fadeUp .45s ease .1s both}
.control-bar{animation:fadeUp .45s ease .15s both}
.phase-summary-grid{animation:fadeUp .45s ease .2s both}
.lesson-library{animation:fadeUp .45s ease .25s both}
.lesson-head{animation:fadeUp .4s ease .05s both}
.lesson-ops{animation:fadeUp .4s ease .1s both}
.day-body{animation:fadeUp .4s ease .15s both}
